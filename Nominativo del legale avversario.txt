
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////*Nominativo del legale avversario


import it.sydema.laweb.domain.Enums

def	legale = first(entityManager.createQuery
	("""
		select		eor.nomeCompleto as elementoOrganizzativoReferente
		from		StoricoReferenteEntita			sr
		join		sr.elementoOrganizzativoReferente	eor
		join		sr.infoEntita				ie
		left join	sr.ruoloReferenteEntita			rre
		where
				ie.idEntita = :posizione_id
				and
				ie.entita = it.sydema.laweb.domain.Enums\$Entita.POSIZIONE
				and
				rre.classeElementoOrganizzativo = it.sydema.laweb.domain.Enums\$ClasseElementoOrganizzativo.SLE
				and
				sr.corrente = true
	""").setParameter('posizione_id', posizione_id).resultList
			)